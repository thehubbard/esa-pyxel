# Tox (https://testrun.org/tox) is a tool for running tests
# Install:
#   pip install tox
# Run:
#   tox
#   tox -l
#   tox -e lint
#   tox -e mypy
#   tox -e build


[tox]
minversion=2.7
;envlist = py{36,37}-{with_model}-pygmo{no,2_8,2_9,2_10}-{pyyaml_3.13,pyyaml_last},flake8,mypy,doc8
envlist = py{36,37}-{pyyaml_3.13,pyyaml_last},flake8,mypy,doc8

[testenv]
deps =
    pytest

    pygmo2_8: pygmo == 2.8
    pygmo2_9: pygmo == 2.9
    pygmo2_10: pygmo == 2.10
    ; with_simulation: pygmo==2.10
    with_model: poppy==0.8.0
    ; with_all: pygmo==2.10,poppy==0.8.0
    pyyaml_3.13: pyyaml==3.13

    ; -rrequirements.txt
    dependencies/esapy_config-0.7.1-py2.py3-none-any.whl
commands =
    pytest --color=yes

[testenv:flake8]
skip_install = true
deps =
    flake8
    flake8-docstrings
    pep8-naming
    #flake8-bugbear
commands =
    flake8 pyxel


[testenv:mypy]
skip_install = true
deps =
    mypy

    ; -rrequirements.txt
    dependencies/esapy_config-0.7.1-py2.py3-none-any.whl
commands =
    mypy --config-file mypy.ini pyxel

[testenv:doc8]
skip_install = true
deps =
  sphinx
  doc8
commands =
  doc8 docs/source
